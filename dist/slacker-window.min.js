(function(){"use strict";var a=function(a){this.worker=new Worker(a),this.id=0,this._transactions={},this.worker.onmessage=function(a){return function(b){a._onMessage(b)}}(this)};a.isSupported=function(){return!!window.Worker};var b=a.prototype;b.invoke=function(a,b,c,d){var e=this.id++,f={method:a,params:b,id:e};this._transactions[e]={success:c,fail:d},this.worker.postMessage(JSON.stringify(f))},b._onMessage=function(a){var b;try{b=JSON.parse(a.data)}catch(c){return}if(void 0!==b.id&&void 0!==b.status){var d=this._transactions[b.id];b.status>0&&d.success?d.success(b.data):b.status<0&&d.fail&&d.fail(b.data),this._transactions[b.id]=null}},"function"==typeof define?define(function(){return a}):"undefined"!=typeof module&&module.exports?module.exports=a:window.Slacker=a}).call(this);